<!DOCTYPE html>
<!-- saved from url=(0038)http://baike.baidu.com/view/189487.htm -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=GBK"><link href="./BMP格式_百度百科_files/bk.dialog.css" type="text/css" rel="stylesheet">
 
<meta content="IE=7" http-equiv="X-UA-Compatible">
<link href="http://img.baidu.com/img/baike/wap/iphone4_logo.png" rel="apple-touch-icon">
<title>BMP格式_百度百科</title>
<script>var PDC={_version:"0.1",_render_start:new Date().getTime(),_analyzer:{loaded:false,url:"http://static.tieba.baidu.com/tb/pms/wpo.pda.js?v=0.1",callbacks:[]},_opt:{is_login:false,sample:0,product_id:0,page_id:0,common_resources:[],special_resources:[]},_timing:{},init:function(a){for(var b in a){this._opt[b]=a[b]}},mark:function(a){this._timing[a]=new Date().getTime()},view_start:function(){this.mark("vt")},tti:function(){this.mark("tti")},page_ready:function(){this.mark("fvt")},metadata:function(){var a=this._opt;var b={env:{user:(a.is_login==true?1:0),product_id:a.product_id,page_id:a.page_id},common_resources:a.common_resources,special_resources:a.special_resources,render_start:this._render_start,timing:this._timing};return b}};(function(){if(document.attachEvent){window.attachEvent("onload",function(){PDC.mark("let");PDC._load_analyzer()})}else{window.addEventListener("load",function(){PDC.mark("lt")},false)}})();</script>
<link href="./BMP格式_百度百科_files/view.css" rel="stylesheet" type="text/css"><link href="./BMP格式_百度百科_files/view(1).css" rel="stylesheet" type="text/css"><link href="./BMP格式_百度百科_files/bk.uc_lemma.css" rel="stylesheet" type="text/css"><link href="./BMP格式_百度百科_files/lemma_insert.css" rel="stylesheet" type="text/css"><script src="./BMP格式_百度百科_files/view_top.js" type="text/javascript"></script><script src="./BMP格式_百度百科_files/init.js" type="text/javascript"></script>
<script>PDC.mark("ht");(function(){var a=PDC.ready=function(){var g=false,f=[],c;if(document.addEventListener){c=function(){document.removeEventListener("DOMContentLoaded",c,false);d()}}else{if(document.attachEvent){c=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",c);d()}}}}function d(){if(!d.isReady){d.isReady=true;for(var k=0,h=f.length;k<h;k++){f[k]()}}}function b(){try{document.documentElement.doScroll("left")}catch(h){setTimeout(b,1);return}d()}function e(){if(g){return}g=true;if(document.addEventListener){document.addEventListener("DOMContentLoaded",c,false);window.addEventListener("load",d,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",c);window.attachEvent("onload",d);var h=false;try{h=window.frameElement==null}catch(i){}if(document.documentElement.doScroll&&h){b()}}}}e();return function(h){d.isReady?h():f.push(h)}}();a.isReady=false})();PDC.ready(function(){PDC.mark("drt")});PDC.mark("vt");</script><script type="text/javascript" src="./BMP格式_百度百科_files/ecom"></script><script type="text/javascript" charset="utf-8" src="./BMP格式_百度百科_files/template_render_lemma.js"></script><script type="text/javascript" src="./BMP格式_百度百科_files/view.js" defer="defer"></script><script type="text/javascript" src="./BMP格式_百度百科_files/bk.uc_lemma.js" defer="defer"></script><script type="text/javascript" src="./BMP格式_百度百科_files/baike.js" defer="defer"></script><script type="text/javascript" src="./BMP格式_百度百科_files/sug.js" defer="defer"></script><script type="text/javascript" src="./BMP格式_百度百科_files/tmpact.js" defer="defer"></script><script type="text/javascript" src="./BMP格式_百度百科_files/h.js" defer="defer"></script><script type="text/javascript" src="./BMP格式_百度百科_files/get"></script><script type="text/javascript" src="./BMP格式_百度百科_files/bk.usercard.js"></script><script type="text/javascript" src="./BMP格式_百度百科_files/baikeDynamicData.js"></script><link type="text/css" rel="stylesheet" href="./BMP格式_百度百科_files/bk.usercard.css"></head>
 
 
<body id="view">
<div id="userbar"><ul><li><a href="http://www.baidu.com/" class="nslog:87">百度首页</a></li><li class="line">|</li><li><a href="https://passport.baidu.com/?login&tpl=wk" class="nslog:88" onclick="userlogin();return false">登录</a><a href="javascript:;" onclick="userlogin.reg();return false">注册</a></li></ul></div>
<div id="wrap">
<div id="header">
<div id="search">
<div id="logo">
<a href="http://baike.baidu.com/"><img alt="到百科首页" border="0" class="nslog:1008" height="46" src="./BMP格式_百度百科_files/logo-baike.png" width="137"></a>
</div>
<div id="search-content">
<p class="nv nslog-area" data-nslog-type="1009">
<a href="http://news.baidu.com/ns?fr=bk&cl=2&rn=20&tn=news&word=BMP%B8%F1%CA%BD" onmousedown="setHeadUrl(this)" wdfield="word">新闻</a><a href="http://www.baidu.com/s?fr=bk&cl=3&wd=BMP%B8%F1%CA%BD&t=5" onmousedown="setHeadUrl(this)" wdfield="wd">网页</a><a href="http://tieba.baidu.com/f?fr=bk&kw=BMP%B8%F1%CA%BD" onmousedown="setHeadUrl(this)" wdfield="kw">贴吧</a><a href="http://zhidao.baidu.com/q?fr=bk&ct=17&pn=0&tn=ikaslist&rn=10&word=BMP%B8%F1%CA%BD" onmousedown="setHeadUrl(this)" wdfield="word">知道</a><a href="http://mp3.baidu.com/m?fr=bk&tn=baidump3&ct=134217728&lm=-1&word=BMP%B8%F1%CA%BD" onmousedown="setHeadUrl(this)" wdfield="word">MP3</a><a href="http://image.baidu.com/i?fr=bk&tn=baiduimage&ct=201326592&lm=-1&cl=2&word=BMP%B8%F1%CA%BD" onmousedown="setHeadUrl(this)" wdfield="word">图片</a><a href="http://video.baidu.com/v?fr=bk&ct=301989888&rn=20&pn=0&db=0&s=24&word=BMP%B8%F1%CA%BD" onmousedown="setHeadUrl(this)" wdfield="word">视频</a><strong>百科</strong><a href="http://wenku.baidu.com/search?fr=bk&word=BMP%B8%F1%CA%BD&lm=0&od=0" onmousedown="setHeadUrl(this)" wdfield="word">文库</a>
</p>
<form action="http://baike.baidu.com/searchword/" method="get" name="f1" target="_self">
<input id="word" maxlength="400" name="word" tabindex="1" value="BMP格式" autocomplete="off">
<input class="search-btn nslog:1010" onclick="document.f1.pic.value=1" tabindex="2" type="submit" value="进入词条"><input class="search-btn nslog:1011" onclick="document.f1.pic.value=2" tabindex="3" type="submit" value="搜索词条">
<input id="sw1" name="pic" type="hidden" value="1">
<input name="sug" type="hidden" value="1">
<input id="search-enc" name="enc" type="hidden" value="gbk">
<iframe src="javascript:void(0)" class="tangram_sug_sd" style="display: none; position: absolute; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; "></iframe><div id="tangram_sug_1328545469204" class="tangram_sug_wpr" style="display: none; "></div></form>
</div>
<div id="help">
<a class="nslog:1012" href="http://www.baidu.com/search/baike_help.html" target="_blank">帮助</a><a class="nslog:1013" href="http://baike.baidu.com/view/189487.htm#" onclick="setSug();return false">设置</a>
</div>
<div class="clear"></div>
<script type="text/javascript">/*<![CDATA[*/var baikeHeaderConf={sugProdName:"baike",searchInputId:baidu.g("word")||baidu.g("kw")};void function(A){var _={url:{}};_.url.escapeSymbol=function(_){return String(_).replace(/[#%&+=\/\\\ \\u3000\f\r\n\t]/g,function(_){return"%"+(256+_.charCodeAt()).toString(16).substring(1).toUpperCase();});};window.setHeadUrl=function(B){B.href=B.href.replace(new RegExp("("+B.getAttribute("wdfield")+"=)[^&]*"),"$1"+_.url.escapeSymbol(A.value));};}(baikeHeaderConf.searchInputId);/*]]>*/</script>
</div><div class="nslog-area" data-nslog-type="1000" id="path">
 
<ul class="nav f14 clearfix">    
            <li class="home"><a href="http://baike.baidu.com/">首页</a></li>
                <li><a href="http://baike.baidu.com/ziran/">自然</a></li>
                 <li><a href="http://baike.baidu.com/wenhua/">文化</a></li>
                 <li><a href="http://baike.baidu.com/dili/">地理</a></li>
                 <li><a href="http://baike.baidu.com/lishi/">历史</a></li>
                 <li><a href="http://baike.baidu.com/shenghuo/">生活</a></li>
                 <li><a href="http://baike.baidu.com/shehui/">社会</a></li>
                 <li><a href="http://baike.baidu.com/yishu/">艺术</a></li>
                 <li><a href="http://baike.baidu.com/renwu/">人物</a></li>
                 <li><a href="http://baike.baidu.com/jingji/">经济</a></li>
                 <li><a href="http://baike.baidu.com/kexue/">科技</a></li>
                 <li><a href="http://baike.baidu.com/tiyu/">体育</a></li>
                 <li><a href="http://baike.baidu.com/tupian/">图片</a></li>
             <li>          <a href="http://baike.baidu.com/museum/" target="_blank" onclick="nslog(location.href,3020);">数字博物馆</a></li>
     <li>          <a href="http://baike.baidu.com/cms/s/festival2012/index.html?name=festival2012&fr=bkhomefestival2012" target="_blank" onclick="nslog(location.href,3021);">大拜年</a></li>
                 <li><a href="http://baike.baidu.com/mall/">百科商城</a></li>
          <style type="text/css" compress=""> 
#path ul.nav li,ul.nav li{
position:relative;
}
.nav{overflow:visible;position:relative;}
div.nav-channel-hot{
 _filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="http://img.baidu.com/img/baike/icons/hot.png");
 background:url("http://img.baidu.com/img/baike/icons/hot.png") no-repeat scroll 0 0 transparent;
_background:none;
 height:15px;
 position:absolute;
 width: 24px;
 top: -7px;
 right:7px
}
 
#path .nav li{padding-right:12px !important;}
 
</style> 
<a href="http://baike.baidu.com/view/1949.htm" target="_blank" title="正月十五闹元宵" style="position: absolute; top: -60px; right: 0px; width: 238px; height: 60px; outline-width: 0px; outline-style: initial; outline-color: initial; font-size: 0px; text-indent: -999em; background-image: url(http://baike.baidu.com/cms/s/banner/yuanxiao.jpg); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; background-position: 0px 0px; background-repeat: no-repeat no-repeat; ">正月十五闹元宵</a></ul>
<script type="text/javascript"> 
   baidu.dom.ready( function(){
                          baidu.page.loadJsFile('http://baike.baidu.com/cms/s/banner/tmpact.js?t=20110201');
              nslog(location.href, 5102);
                                       });
</script>
 
 
</div>
</div>
<div id="page">
<script>if(typeof PDC!="undefined"){PDC.view_start();}</script><div class="layout grid-m0s245 w1000" id="content-wrap">
<div class="col-main article" id="content">
<div class="main-wrap main-shadow">
<div class="content-hd">
<div class="content-hd-wrap"></div>
</div>
<div class="content-bd main-body">
<div class="text" id="sec-content0">
<div class="bk-editable-lemma-btns">
<a class="tpldivide-lemma lemma-top-link" hidefocus="true" href="http://baike.baidu.com/tpldivideload?lemmaId=189487" id="tmpdivide" style="display:none;margin-right:14px" target="_blank"></a>
<a class="dividable-lemma lemma-top-link" data-edit-id="189487" hidefocus="true" href="http://baike.baidu.com/divideload?lemmaid=189487" id="polyin" style="display:none">拆分词条</a>
<span class="editable-lemma" data-edit-id="189487"></span>
<span style="height:100%"></span>
</div>
<h1 class="title">BMP格式</h1>
<script type="text/javascript">/*<![CDATA[*/var hash=window.location.hash.match(/^#sub(\d+)/);bk.view.hash=hash&&hash[1];hash=null;bk.view.expFlag=false;baikeViewInfo={id:"189487",editable:"true",title:"BMP格式",expIndex:"0",subLen:"1",isMulit:false};/*]]>*/</script>
<div class="clear"></div>
<div class="mod-top">
<h4 class="card-title"><span class="throwbtl-link-span" data-edit-id="$$$$189487"><a sublemmaid="" orilemmaid="189487" sublemmatitle="" isviewcard="1" class="throwbtl-link-view" href="http://baike.baidu.com/view/189487.htm#" onclick="userlogin();return false;">求助编辑</a></span>百科名片</h4>
<div class="card-summary nslog-area" data-nslog-type="72">
<div class="card-summary-content">
<p>
BMP是英文Bitmap（位图）的简写，它是Windows操作系统中的标准图像文件格式，能够被多种Windows应用程序所支持。随着Windows操作系统的流行与丰富的Windows应用程序的开发，BMP位图格式理所当然地被广泛应用。这种格式的特点是包含的图像信息较丰富，几乎不进行压缩，但由此导致了它与生俱生来的缺点--占用磁盘空间过大。所以，目前BMP在单机上比较流行。</p>
</div>
<div class="clear"></div>
</div>
</div>
<fieldset class="text_dir nslog-area" data-nslog-type="1016" data-subindex="0" id="catalog-0">
<p>目录</p>
<dl class="holder1" id="catalog-holder-0" style="width: 248px; visibility: hidden; padding-bottom: 20px; ">
<dd><a href="http://baike.baidu.com/view/189487.htm#1" class="nslog:1274" name="STAT_ONCLICK_UNSUBMIT_CATALOG">BMP文件格式分析</a></dd><dd><a href="http://baike.baidu.com/view/189487.htm#2" class="nslog:1274" name="STAT_ONCLICK_UNSUBMIT_CATALOG">bmp位图和调色板的概念</a><ol style="display: none; "><li><a href="http://baike.baidu.com/view/189487.htm#2_1">RGB颜色阵列?</a></li></ol></dd><dd><a href="http://baike.baidu.com/view/189487.htm#3" class="nslog:1274" name="STAT_ONCLICK_UNSUBMIT_CATALOG">加载文件</a><ol style="display: none; "><li><a href="http://baike.baidu.com/view/189487.htm#3_1">1、加载文件头</a></li><li><a href="http://baike.baidu.com/view/189487.htm#3_2">2、加载位图信息头</a></li><li><a href="http://baike.baidu.com/view/189487.htm#3_3">3、行对齐</a></li><li><a href="http://baike.baidu.com/view/189487.htm#3_4">4、加载图片数据</a></li><li><a href="http://baike.baidu.com/view/189487.htm#3_5">5、绘制</a></li><li><a href="http://baike.baidu.com/view/189487.htm#3_6">6、3D(OpenGL）的不同之处</a></li></ol></dd></dl>
<dl class="holder2 arr" id="catalog-holder-2-0" style="width: 248px; display: block; ">
<dd><a href="http://baike.baidu.com/view/189487.htm#1" class="nslog:1274" name="STAT_ONCLICK_UNSUBMIT_CATALOG">BMP文件格式分析</a></dd><dd><a href="http://baike.baidu.com/view/189487.htm#2" class="nslog:1274" name="STAT_ONCLICK_UNSUBMIT_CATALOG">bmp位图和调色板的概念</a><ol style="display: none; "><li><a href="http://baike.baidu.com/view/189487.htm#2_1">RGB颜色阵列?</a></li></ol></dd><dd><a href="http://baike.baidu.com/view/189487.htm#3" class="nslog:1274" name="STAT_ONCLICK_UNSUBMIT_CATALOG">加载文件</a><ol style="display: none; "><li><a href="http://baike.baidu.com/view/189487.htm#3_1">1、加载文件头</a></li><li><a href="http://baike.baidu.com/view/189487.htm#3_2">2、加载位图信息头</a></li><li><a href="http://baike.baidu.com/view/189487.htm#3_3">3、行对齐</a></li><li><a href="http://baike.baidu.com/view/189487.htm#3_4">4、加载图片数据</a></li><li><a href="http://baike.baidu.com/view/189487.htm#3_5">5、绘制</a></li><li><a href="http://baike.baidu.com/view/189487.htm#3_6">6、3D(OpenGL）的不同之处</a></li></ol></dd><div id="catalog-holder0" class="nslog:1017 catalog-holder">展开</div></dl>
</fieldset>
<div class="clear"></div>
<script type="text/javascript">bk.view.catalog().start("0");</script>
<div class="lemma-main-content" id="lemmaContent-0">
<h2 class="headline-1 first bk-sidecatalog-title"><span class="text_edit editable-title" data-edit-id="189487:189487:1"><a href="http://baike.baidu.com/view/189487.htm#" class="nslog:1019" onclick="bk.view.editLemma(&quot;/edit/&quot;,189487,189487,1);return false">编辑本段</a></span><a name="1"></a><span class="headline-content">BMP文件格式分析</span></h2>　　简介 
<div class="spctrl"></div>　　BMP(Bitmap-File）图形文件是Windows采用的图形文件格式，在Windows环境下运行的所有图象处理软件都支持BMP图象文件格式。Windows系统内部各图像绘制操作都是以BMP为基础的。Windows 3.0以前的BMP图文件格式与显示设备有关，因此把这种BMP图象文件格式称为设备相关位图DDB(device-dependent bitmap）文件格式。Windows 3.0以后的BMP图象文件与显示设备无关，因此把这种BMP图象文件格式称为设备无关位图DIB(device-independent bitmap）格式（注：Windows 3.0以后，在系统中仍然存在DDB位图，象BitBlt（）这种函数就是基于DDB位图的，只不过如果你想将图像以BMP格式保存到磁盘文件中时，微软极力推荐你以DIB格式保存），目的是为了让Windows能够在任何类型的显示设备上显示所存储的图象。BMP位图文件默认的文件扩展名是BMP或者bmp（有时它也会以.DIB或.RLE作扩展名）。
<div class="spctrl"></div>　　1.2 文件结构 
<div class="spctrl"></div>　　位图文件可看成由4个部分组成：位图文件头（bitmap-file header）、位图信息头（bitmap-information header）、彩色表（color table）和定义位图的字节阵列，它具有如下所示的形式。
<div class="spctrl"></div>　　<b>位图文件的组成</b>
<div class="spctrl"></div>　　结构名称 符 号 
<div class="spctrl"></div>　　位图文件头 (bitmap-file header) BITMAPFILEHEADER bmfh 
<div class="spctrl"></div>　　位图信息头 (bitmap-information header) BITMAPINFOHEADER bmih 
<div class="spctrl"></div>　　彩色表　(color table) RGBQUAD aColors[] 
<div class="spctrl"></div>　　图象数据阵列字节 BYTE aBitmapBits[] 
<div class="spctrl"></div>　　位图文件结构可综合在表6-01中。
<div class="spctrl"></div>　　表01 位图文件结构内容摘要 
<div class="spctrl"></div>　　偏移量 域的名称 大小 内容
<div class="spctrl"></div>　　<b>图象文件头</b>
<div class="spctrl"></div>　　0000h 文件标识 2 bytes 两字节的内容用来识别位图的类型：
<div class="spctrl"></div>　　‘BM’ ：Windows 3.1x,95,NT，… 
<div class="spctrl"></div>　　‘BA’ ：OS/2 Bitmap Array 
<div class="spctrl"></div>　　‘CI’ ：OS/2 Color Icon 
<div class="spctrl"></div>　　‘CP’ ：OS/2 Color Pointer 
<div class="spctrl"></div>　　‘IC’ ：OS/2 Icon 
<div class="spctrl"></div>　　‘PT’ ：OS/2 Pointer 
<div class="spctrl"></div>　　注：因为OS/2系统并没有被普及开，所以在编程时，你只需判断第一个标识“BM”就行。
<div class="spctrl"></div>　　0002h File Size 1 dword 用字节表示的整个文件的大小 
<div class="spctrl"></div>　　0006h Reserved 1 dword 保留，必须设置为0 
<div class="spctrl"></div>　　000Ah Bitmap Data Offset 1 dword 从文件开始到位图数据开始之间的数据（bitmap data）之间的偏移量 
<div class="spctrl"></div>　　<b><sup>[1]</sup><a name="ref_[1]"></a>图象信息头 </b>
<div class="spctrl"></div>　　000Eh Bitmap Header Size 1 dword 位图信息头（Bitmap Info Header）的长度，用来描述位图的颜色、压缩方法等。下面的长度表示：
<div class="spctrl"></div>　　28h - Windows 3.1x,95,NT，… 
<div class="spctrl"></div>　　0Ch - OS/2 1.x 
<div class="spctrl"></div>　　F0h - OS/2 2.x 
<div class="spctrl"></div>　　注：在Windows95、98、2000等操作系统中，位图信息头的长度并不一定是28h，因为微软已经制定出了新的BMP文件格式，其中的信息头结构变化比较大，长度加长。所以最好不要直接使用常数28h，而是应该从具体的文件中读取这个值。这样才能确保程序的兼容性。
<div class="spctrl"></div>　　0012h Width 1 dword 位图的宽度，以象素为单位 
<div class="spctrl"></div>　　0016h Height 1 dword 位图的高度，以象素为单位 
<div class="spctrl"></div>　　001Ah Planes 1 word 位图的位面数（注：该值将总是1） 
<div class="spctrl"></div>　　001Ch Bits Per Pixel 1 word 每个象素的位数 
<div class="spctrl"></div>　　1 - 单色位图（实际上可有两种颜色，缺省情况下是黑色和白色。你可以自己定义这两种颜色） 
<div class="spctrl"></div>　　4 - 16 色位图 
<div class="spctrl"></div>　　8 - 256 色位图 
<div class="spctrl"></div>　　16 - 16bit 高彩色位图 
<div class="spctrl"></div>　　24 - 24bit 真彩色位图 
<div class="spctrl"></div>　　32 - 32bit 增强型真彩色位图 
<div class="spctrl"></div>　　001Eh Compression 1 dword 压缩说明：
<div class="spctrl"></div>　　0 - 不压缩 （使用BI_RGB表示） 
<div class="spctrl"></div>　　1 - RLE 8-使用8位RLE压缩方式（用BI_RLE8表示） 
<div class="spctrl"></div>　　2 - RLE 4-使用4位RLE压缩方式（用BI_RLE4表示） 
<div class="spctrl"></div>　　3 - Bitfields-位域存放方式（用BI_BITFIELDS表示） 
<div class="spctrl"></div>　　0022h Bitmap Data Size 1 dword 用字节数表示的位图数据的大小。该数必须是4的倍数 
<div class="spctrl"></div>　　0026h HResolution 1 dword 用象素/米表示的水平分辨率 
<div class="spctrl"></div>　　002Ah VResolution 1 dword 用象素/米表示的垂直分辨率
<div class="spctrl"></div>　　002Eh Colors 1 dword 位图使用的颜色数。如8-比特/象素表示为100h或者 256. 
<div class="spctrl"></div>　　0032h Important Colors 1 dword 指定重要的颜色数。当该域的值等于颜色数时（或者等于0时），表示所有颜色都一样重要 
<div class="spctrl"></div>　　调色板数据 根据BMP版本的不同而不同 Palette N * 4 byte 调色板规范。对于调色板中的每个表项，这4个字节用下述方法来描述RGB的值：1字节用于蓝色分量 
<div class="spctrl"></div>　　1字节用于绿色分量 
<div class="spctrl"></div>　　1字节用于红色分量 
<div class="spctrl"></div>　　1字节用于填充符（设置为0) 
<div class="spctrl"></div>　　图象数据 根据BMP版本及调色板尺寸的不同而不同 Bitmap Data xxx bytes 该域的大小取决于压缩方法及图像的尺寸和图像的位深度，它包含所有的位图数据字节，这些数据可能是彩色调色板的索引号，也可能是实际的RGB值，这将根据图像信息头中的位深度值来决定。
<div class="spctrl"></div>　　<b>构件详解 
<div class="spctrl"></div>　　</b>　1. 位图文件头 
<div class="spctrl"></div>　　位图文件头包含有关于文件类型、文件大小、存放位置等信息，在Windows 3.0以上版本的位图文件中用BITMAPFILEHEADER结构来定义：
<div class="spctrl"></div>　　typedef struct tagBITMAPFILEHEADER { /* bmfh */ 
<div class="spctrl"></div>　　UINT bfType; 
<div class="spctrl"></div>　　DWORD bfSize; 
<div class="spctrl"></div>　　UINT bfReserved1; 
<div class="spctrl"></div>　　UINT bfReserved2; 
<div class="spctrl"></div>　　DWORD bfOffBits; 
<div class="spctrl"></div>　　} BITMAPFILEHEADER; 
<div class="spctrl"></div>　　其中：
<div class="spctrl"></div>　　bfType 
<div class="spctrl"></div>　　说明文件的类型.（该值必需是<b>0x4D42</b>，也就是字符'BM'。我们不需要判断OS/2的位图标识，这么做现在来看似乎已经没有什么意义了，而且如果要支持OS/2的位图，程序将变得很繁琐。所以，在此只建议你检察'BM'标识） 
<div class="spctrl"></div>　　<b>注意：</b><b>查</b><b>ascii</b><b>表</b><b>B 0x42</b><b>,M0x4d,bfType </b><b>为两个字节，</b><b>B</b><b>为</b><b>low</b><b>字节，</b><b>M</b><b>为high字节</b><b>所以</b><b>bfType=</b><b>0x4D42</b><b>，而不是</b><b>0x424D，但注意</b>
<div class="spctrl"></div>　　bfSize 
<div class="spctrl"></div>　　说明文件的大小，用字节为单位 
<div class="spctrl"></div>　　bfReserved1 
<div class="spctrl"></div>　　保留，必须设置为0 
<div class="spctrl"></div>　　bfReserved2 
<div class="spctrl"></div>　　保留，必须设置为0 
<div class="spctrl"></div>　　bfOffBits 
<div class="spctrl"></div>　　说明从文件头开始到实际的图象数据之间的字节的偏移量。这个参数是非常有用的，因为位图信息头和调色板的长度会根据不同情况而变化，所以你可以用这个偏移值迅速的从文件中读取到位数据。
<div class="spctrl"></div>　　2. 位图信息头 
<div class="spctrl"></div>　　位图信息用BITMAPINFO结构来定义，它由位图信息头（bitmap-information header）和彩色表（color table）组成，前者用BITMAPINFOHEADER结构定义，后者用RGBQUAD结构定义。BITMAPINFO结构具有如下形式：
<div class="spctrl"></div>　　typedef struct tagBITMAPINFO { /* bmi */ 
<div class="spctrl"></div>　　BITMAPINFOHEADER bmiHeader; 
<div class="spctrl"></div>　　RGBQUAD bmiColors[1]; 
<div class="spctrl"></div>　　} BITMAPINFO; 
<div class="spctrl"></div>　　其中：
<div class="spctrl"></div>　　bmiHeader 
<div class="spctrl"></div>　　说明BITMAPINFOHEADER结构，其中包含了有关位图的尺寸及位格式等信息 
<div class="spctrl"></div>　　bmiColors 
<div class="spctrl"></div>　　说明彩色表RGBQUAD结构的阵列，其中包含索引图像的真实RGB值。
<div class="spctrl"></div>　　BITMAPINFOHEADER结构包含有位图文件的大小、压缩类型和颜色格式，其结构定义为：
<div class="spctrl"></div>　　typedef struct tagBITMAPINFOHEADER { /* bmih */ 
<div class="spctrl"></div>　　DWORD biSize; 
<div class="spctrl"></div>　　LONG biWidth; 
<div class="spctrl"></div>　　LONG biHeight; 
<div class="spctrl"></div>　　WORD biPlanes; 
<div class="spctrl"></div>　　WORD biBitCount; 
<div class="spctrl"></div>　　DWORD biCompression; 
<div class="spctrl"></div>　　DWORD biSizeImage; 
<div class="spctrl"></div>　　LONG biXPelsPerMeter; 
<div class="spctrl"></div>　　LONG biYPelsPerMeter; 
<div class="spctrl"></div>　　DWORD biClrUsed; 
<div class="spctrl"></div>　　DWORD biClrImportant; 
<div class="spctrl"></div>　　} BITMAPINFOHEADER; 
<div class="spctrl"></div>　　其中：
<div class="spctrl"></div>　　biSize 
<div class="spctrl"></div>　　说明BITMAPINFOHEADER结构所需要的字数。注：这个值并不一定是BITMAPINFOHEADER结构的尺寸，它也可能是sizeof(BITMAPV4HEADER）的值，或是sizeof(BITMAPV5HEADER）的值。这要根据该位图文件的格式版本来决定，不过，就现在的情况来看，绝大多数的BMP图像都是BITMAPINFOHEADER结构的（可能是后两者太新的缘故吧:-）。
<div class="spctrl"></div>　　biWidth 
<div class="spctrl"></div>　　说明图象的宽度，以象素为单位 
<div class="spctrl"></div>　　biHeight 
<div class="spctrl"></div>　　说明图象的高度，以象素为单位。注：这个值除了用于描述图像的高度之外，它还有另一个用处，就是指明该图像是倒向的位图，还是正向的位图。如果该值是一个正数，说明图像是倒向的，如果该值是一个负数，则说明图像是正向的。大多数的BMP文件都是倒向的位图，也就是时，高度值是一个正数。（注：当高度值是一个负数时（正向图像），图像将不能被压缩（也就是说biCompression成员将不能是BI_RLE8或BI_RLE4）。
<div class="spctrl"></div>　　biPlanes 
<div class="spctrl"></div>　　为目标设备说明位面数，其值将总是被设为1 
<div class="spctrl"></div>　　biBitCount 
<div class="spctrl"></div>　　说明比特数/象素，其值为1、4、8、16、24、或32 
<div class="spctrl"></div>　　biCompression 
<div class="spctrl"></div>　　说明图象数据压缩的类型。其值可以是下述值之一：
<div class="spctrl"></div>　　BI_RGB：没有压缩； 
<div class="spctrl"></div>　　BI_RLE8：每个象素8比特的RLE压缩编码，压缩格式由2字节组成（重复象素计数和颜色索引）； 
<div class="spctrl"></div>　　BI_RLE4：每个象素4比特的RLE压缩编码，压缩格式由2字节组成 
<div class="spctrl"></div>　　BI_BITFIELDS：每个象素的比特由指定的掩码决定。
<div class="spctrl"></div>　　biSizeImage 
<div class="spctrl"></div>　　说明图象的大小，以字节为单位。当用BI_RGB格式时，可设置为0 
<div class="spctrl"></div>　　biXPelsPerMeter 
<div class="spctrl"></div>　　说明水平分辨率，用象素/米表示 
<div class="spctrl"></div>　　biYPelsPerMeter 
<div class="spctrl"></div>　　说明垂直分辨率，用象素/米表示 
<div class="spctrl"></div>　　biClrUsed 
<div class="spctrl"></div>　　说明位图实际使用的彩色表中的颜色索引数（设为0的话，则说明使用所有调色板项） 
<div class="spctrl"></div>　　biClrImportant 
<div class="spctrl"></div>　　说明对图象显示有重要影响的颜色索引的数目，如果是0，表示都重要。
<div class="spctrl"></div>　　现就BITMAPINFOHEADER结构作如下说明：
<div class="spctrl"></div>　　(1) 彩色表的定位 
<div class="spctrl"></div>　　应用程序可使用存储在biSize成员中的信息来查找在BITMAPINFO结构中的彩色表，如下所示：
<div class="spctrl"></div>　　pColor = ((LPSTR) pBitmapInfo + (WORD) (pBitmapInfo-&gt;bmiHeader.biSize)) 
<div class="spctrl"></div>　　(2) biBitCount 
<div class="spctrl"></div>　　biBitCount=1 表示位图最多有两种颜色，缺省情况下是黑色和白色，你也可以自己定义这两种颜色。图像信息头装调色板中将有两个调色板项，称为索引0和索引1。图象数据阵列中的每一位表示一个象素。如果一个位是0，显示时就使用索引0的RGB值，如果位是1，则使用索引1的RGB值。
<div class="spctrl"></div>　　biBitCount=4 表示位图最多有16种颜色。每个象素用4位表示，并用这4位作为彩色表的表项来查找该象素的颜色。例如，如果位图中的第一个字节为0x1F，它表示有两个象素，第一象素的颜色就在彩色表的第2表项中查找，而第二个象素的颜色就在彩色表的第16表项中查找。此时，调色板中缺省情况下会有16个RGB项。对应于索引0到索引15。
<div class="spctrl"></div>　　biBitCount=8 表示位图最多有256种颜色。每个象素用8位表示，并用这8位作为彩色表的表项来查找该象素的颜色。例如，如果位图中的第一个字节为0x1F，这个象素的颜色就在彩色表的第32表项中查找。此时，缺省情况下，调色板中会有256个RGB项，对应于索引0到索引255。
<div class="spctrl"></div>　　biBitCount=16 表示位图最多有65536种颜色。每个色素用16位（2个字节）表示。这种格式叫作高彩色，或叫增强型16位色，或64K色。它的情况比较复杂，当biCompression成员的值是BI_RGB时，它没有调色板。16位中，最低的5位表示蓝色分量，中间的5位表示绿色分量，高的5位表示红色分量，一共占用了15位，最高的一位保留，设为0。这种格式也被称作555 16位位图。如果biCompression成员的值是BI_BITFIELDS，那么情况就复杂了，首先是原来调色板的位置被三个DWORD变量占据，称为红、绿、蓝掩码。分别用于描述红、绿、蓝分量在16位中所占的位置。在Windows 95（或98）中，系统可接受两种格式的位域：555和565，在555格式下，红、绿、蓝的掩码分别是：0x7C00、0x03E0、0x001F，而在565格式下，它们则分别为：0xF800、0x07E0、0x001F。你在读取一个像素之后，可以分别用掩码“与”上像素值，从而提取出想要的颜色分量（当然还要再经过适当的左右移操作）。在NT系统中，则没有格式限制，只不过要求掩码之间不能有重叠。（注：这种格式的图像使用起来是比较麻烦的，不过因为它的显示效果接近于真彩，而图像数据又比真彩图像小的多，所以，它更多的被用于游戏软件）。
<div class="spctrl"></div>　　biBitCount=24 表示位图最多有1670万种颜色。这种位图没有调色板（bmiColors成员尺寸为0），在位数组中，每3个字节代表一个象素，分别对应于颜色R、G、B。
<div class="spctrl"></div>　　biBitCount=32 表示位图最多有4294967296(2的32次方）种颜色。这种位图的结构与16位位图结构非常类似，当biCompression成员的值是BI_RGB时，它也没有调色板，32位中有24位用于存放RGB值，顺序是：最高位―保留，红8位、绿8位、蓝8位。这种格式也被成为888 32位图。如果 biCompression成员的值是BI_BITFIELDS时，原来调色板的位置将被三个DWORD变量占据，成为红、绿、蓝掩码，分别用于描述红、绿、蓝分量在32位中所占的位置。在Windows 95(or 98）中，系统只接受888格式，也就是说三个掩码的值将只能是：0xFF0000、0xFF00、0xFF。而在NT系统中，你只要注意使掩码之间不产生重叠就行。（注：这种<a target="_blank" href="http://baike.baidu.com/view/13674.htm">图像格式</a>比较规整，因为它是DWORD对齐的，所以在内存中进行图像处理时可进行汇编级的代码优化（简单））。<div class="bpctrl"></div><h2 class="headline-1 bk-sidecatalog-title"><span class="text_edit editable-title" data-edit-id="189487:189487:2"><a href="http://baike.baidu.com/view/189487.htm#" class="nslog:1019" onclick="bk.view.editLemma(&quot;/edit/&quot;,189487,189487,2);return false">编辑本段</a></span><a name="2"></a><span class="headline-content">bmp位图和调色板的概念</span></h2>　　如今Windows(3.x以及95，98，NT）系列已经成为绝大多数用户使用的操作系统，它比DOS成功的一个重要因素是它可视化的漂亮界面。那么Windows是如何显示图象的呢？这就要谈到位图（bitmap）。
<div class="spctrl"></div>　　我们知道，普通的显示器屏幕是由许许多多点构成的，我们称之为象素。显示时采用扫描的方法：电子枪每次从左到右扫描一行，为每个象素着色，然后从上到下这样扫描若干行，就扫过了一屏。为了防止闪烁，每秒要重复上述过程几十次。例如我们常说的屏幕分辨率为640×480，刷新频率为70Hz，意思是说每行要扫描640个象素，一共有480行，每秒重复扫描屏幕70次。
<div class="spctrl"></div>　　我们称这种显示器为位映象设备。所谓位映象，就是指一个二维的象素矩阵，而位图就是采用位映象方法显示和存储的图象。举个例子，图1.1是一幅普通的黑白位图，图1.2是被放大后的图，图中每个方格代表了一个象素。我们可以看到：整个骷髅就是由这样一些黑点和白点组成的。
<div class="spctrl"></div>　　<table class="table-view log-set-param" log-set-param="table_view"><tbody><tr><td width="345" align="left" valign="middle">图1.1 骷髅</td><td width="345" align="left" valign="middle">
<br><b>图</b><b>1.2 </b>放大后的骷髅位图</td></tr></tbody></table>那么，彩色图是怎么回事呢？
<div class="spctrl"></div>　　我们先来说说三元色RGB概念。
<div class="spctrl"></div>　　我们知道，自然界中的所有颜色都可以由红、绿、蓝（R，G，B）组合而成。有的颜色含有红色成分多一些，如深红；有的含有红色成分少一些，如浅红。针对含有红色成分的多少，可以分成0到255共256个等级，0级表示不含红色成分；255级表示含有100%的红色成分。同样，绿色和蓝色也被分成256级。这种分级概念称为量化。
<div class="spctrl"></div>　　这样，根据红、绿、蓝各种不同的组合我们就能表示出256×256×256，约1600万种颜色。这么多颜色对于我们人眼来说已经足够丰富了。
<div class="spctrl"></div>　　<b>表</b><b>1.1 </b><b>常见颜色的</b><b>RGB</b>组合值
<div class="spctrl"></div>　　<table class="table-view log-set-param" log-set-param="table_view"><tbody><tr><td>颜色</td><td>R</td><td>G</td><td>B</td></tr><tr><td>红</td><td>255</td><td>0</td><td>0</td></tr><tr><td>蓝</td><td>0</td><td>0</td><td>255</td></tr><tr><td>绿</td><td>0</td><td>255</td><td>0</td></tr><tr><td>黄</td><td>255</td><td>255</td><td>0</td></tr><tr><td>紫</td><td>255</td><td>0</td><td>255</td></tr><tr><td>青</td><td>0</td><td>255</td><td>255</td></tr><tr><td>白</td><td>255</td><td>255</td><td>255</td></tr><tr><td>黑</td><td>0</td><td>0</td><td>0</td></tr><tr><td>灰</td><td>128</td><td>128</td><td>128</td></tr></tbody></table>你大概已经明白了，当一幅图中每个象素赋予不同的RGB值时，能呈现出五彩缤纷的颜色了，这样就形成了彩色图。的确是这样的，但实际上的做法还有些差别。
<div class="spctrl"></div>　　让我们来看看下面的例子。
<div class="spctrl"></div>　　有一个长宽各为200个象素，颜色数为16色的彩色图，每一个象素都用R、G、B三个分量表示。因为每个分量有256个级别，要用8位（bit），即一个字节（byte）来表示，所以每个象素需要用3个字节。整个图象要用200×200×3，约120k字节，可不是一个小数目呀！如果我们用下面的方法，就能省的多。
<div class="spctrl"></div>　　因为是一个16色图，也就是说这幅图中最多只有16种颜色，我们可以用一个表：表中的每一行记录一种颜色的R、G、B值。这样当我们表示一个象素的颜色时，只需要指出该颜色是在第几行，即该颜色在表中的索引值。举个例子，如果表的第0行为255，0，0（红色），那么当某个象素为红色时，只需要标明0即可。
<div class="spctrl"></div>　　让我们再来计算一下：16种状态可以用4位（bit）表示，所以一个象素要用半个字节。整个图象要用200×200×0.5，约20k字节，再加上表占用的字节为3×16=48字节.整个占用的字节数约为前面的1/6，省很多吧？
<div class="spctrl"></div>　　这张R、G、B的表，就是我们常说的调色板（Palette），另一种叫法是颜色查找表LUT(Look Up Table），似乎更确切一些。Windows位图中便用到了调色板技术。其实不光是Windows位图，许多图象文件格式如pcx、tif、gif等都用到了。所以很好地掌握调色板的概念是十分有用的。
<div class="spctrl"></div>　　有一种图，它的颜色数高达256×256×256种，也就是说包含我们上述提到的R、G、B颜色表示方法中所有的颜色，这种图叫做真彩色图（true color）。真彩色图并不是说一幅图包含了所有的颜色，而是说它具有显示所有颜色的能力，即最多可以包含所有的颜色。表示真彩色图时，每个象素直接用R、G、B三个分量字节表示，而不采用调色板技术。原因很明显：如果用调色板，表示一个象素也要用24位，这是因为每种颜色的索引要用24位（因为总共有2种颜色，即调色板有2行），和直接用R，G，B三个分量表示用的字节数一样，不但没有任何便宜，还要加上一个256×256×256×3个字节的大调色板。所以真彩色图直接用R、G、B三个分量表示，它又叫做24位色图。<h3 class="headline-2 bk-sidecatalog-title"><a name="2_1"></a><span class="headline-content">RGB颜色阵列?</span></h3>　　有关RGB三色空间我想大家都很熟悉，这里我想说的是在Windows下，RGB颜色阵列存储的格式其实BGR。也就是说，对于24位的RGB位图像素数据格式是：
<div class="spctrl"></div>　　<table class="table-view log-set-param" log-set-param="table_view"><tbody><tr><td width="148" align="left" valign="middle">蓝色B值</td><td width="148" align="left" valign="middle">绿色G值</td><td width="160" align="left" valign="middle">红色R值</td></tr></tbody></table>对于32位的RGB位图像素数据格式是：
<div class="spctrl"></div>　　<table class="table-view log-set-param" log-set-param="table_view"><tbody><tr><td width="114" align="left" valign="middle">蓝色B值</td><td width="114" align="left" valign="middle">绿色G值</td><td width="114" align="left" valign="middle">红色R值</td><td width="114" align="left" valign="middle">透明通道A值</td></tr></tbody></table>透明通道也称Alpha通道，该值是该像素点的透明属性，取值在0（全透明）到255（不透明）之间。对于24位的图像来说，因为没有Alpha通道，故整个图像都不透明。<div class="bpctrl"></div><h2 class="headline-1 bk-sidecatalog-title"><span class="text_edit editable-title" data-edit-id="189487:189487:3"><a href="http://baike.baidu.com/view/189487.htm#" class="nslog:1019" onclick="bk.view.editLemma(&quot;/edit/&quot;,189487,189487,3);return false">编辑本段</a></span><a name="3"></a><span class="headline-content">加载文件</span></h2>　　加载文件的目的是要得到图片属性，以及RGB数据，然后可以将其绘制在DC上（GDI），或是生成纹理对象（3D:OpenGL/Direct3D）。这两种用途在数据处理上有点区别，我们主要按前一种用法讲，在和3D有不同的地方，我们再提出来。<h3 class="headline-2 bk-sidecatalog-title"><a name="3_1"></a><span class="headline-content">1、加载文件头</span></h3>　　//Load the file header
<div class="spctrl"></div>　　BITMAPFILEHEADER header;
<div class="spctrl"></div>　　memset(&amp;header,0,sizeof(header));
<div class="spctrl"></div>　　inf.read((char*)&amp;header,sizeof(header));
<div class="spctrl"></div>　　if(header.bfType != 0x4D42)
<div class="spctrl"></div>　　return false;
<div class="spctrl"></div>　　这个很简单，没有什么好说的。<h3 class="headline-2 bk-sidecatalog-title"><a name="3_2"></a><span class="headline-content">2、加载位图信息头</span></h3>　　//Load the image information header
<div class="spctrl"></div>　　BITMAPINFOHEADER infoheader;
<div class="spctrl"></div>　　memset(&amp;infoheader,0,sizeof(infoheader));
<div class="spctrl"></div>　　inf.read((char*)&amp;infoheader,sizeof(infoheader));
<div class="spctrl"></div>　　m_iImageWidth = infoheader.biWidth;
<div class="spctrl"></div>　　m_iImageHeight = infoheader.biHeight;
<div class="spctrl"></div>　　m_iBitsPerPixel = infoheader.biBitCount;
<div class="spctrl"></div>　　这里我们得到了3各重要的图形属性：宽，高，以及每个像素颜色所占用的位数。<h3 class="headline-2 bk-sidecatalog-title"><a name="3_3"></a><span class="headline-content">3、行对齐</span></h3>　　由于Windows在进行行扫描的时候最小的单位为4个字节，所以当 
<div class="spctrl"></div>　　图片宽 X 每个像素的字节数 ！= 4的整数倍
<div class="spctrl"></div>　　时要在每行的后面补上缺少的字节，以0填充（一般来说当图像宽度为2的幂时不需要对齐）。位图文件里的数据在写入的时候已经进行了行对齐，也就是说加载的时候不需要再做行对齐。但是这样一来图片数据的长度就不是：宽 X 高 X 每个像素的字节数了，我们需要通过下面的方法计算正确的数据长度：
<div class="spctrl"></div>　　//Calculate the image data size
<div class="spctrl"></div>　　int iLineByteCnt = (((m_iImageWidth*m_iBitsPerPixel) + 3) &gt;&gt; 2) &lt;&lt; 2;
<div class="spctrl"></div>　　m_iImageDataSize = iLineByteCnt * m_iImageHeight;<h3 class="headline-2 bk-sidecatalog-title"><a name="3_4"></a><span class="headline-content">4、加载图片数据</span></h3>　　对于24位和32位的位图文件，位图数据的偏移量为sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER），也就是说现在我们可以直接读取图像数据了。
<div class="spctrl"></div>　　if(m_pImageData) delete []m_pImageData;
<div class="spctrl"></div>　　m_pImageData = new unsigned char[m_iImageDataSize];
<div class="spctrl"></div>　　inf.read((char*)m_pImageData,m_iImageDataSize);
<div class="spctrl"></div>　　如果你足够细心，就会发现内存m_pImageData里的数据的确是BGR格式，可以用个纯蓝色或者是纯红色的图片测试一下。<h3 class="headline-2 bk-sidecatalog-title"><a name="3_5"></a><span class="headline-content">5、绘制</span></h3>　　好了，数据和属性我们都有了，现在就可以拿来随便用了，就和吃馒头一样，爱粘白糖粘白糖，爱粘红糖粘红糖。下面是我的GDI绘制代码，仅作参考。
<div class="spctrl"></div>　　void CImage::DrawImage(HDC hdc,int iLeft,int iTop,int iWidth,int iHeight)
<div class="spctrl"></div>　　{
<div class="spctrl"></div>　　if(!hdc || m_pImageData == NULL)
<div class="spctrl"></div>　　return;
<div class="spctrl"></div>　　BITMAPINFO bmi;
<div class="spctrl"></div>　　memset(&amp;bmi,0,sizeof(bmi));
<div class="spctrl"></div>　　bmi.bmiHeader.biSize = sizeof(BITMAPINFO);
<div class="spctrl"></div>　　bmi.bmiHeader.biWidth = m_iImageWidth;
<div class="spctrl"></div>　　bmi.bmiHeader.biHeight = m_iImageHeight;
<div class="spctrl"></div>　　bmi.bmiHeader.biPlanes = 1;
<div class="spctrl"></div>　　bmi.bmiHeader.biBitCount = m_iBitsPerPixel;
<div class="spctrl"></div>　　bmi.bmiHeader.biCompression = BI_RGB;
<div class="spctrl"></div>　　bmi.bmiHeader.biSizeImage = m_iImageDataSize;
<div class="spctrl"></div>　　StretchDIBits(hdc,iLeft,iTop,iWidth,iHeight,
<div class="spctrl"></div>　　0,0,m_iImageWidth,m_iImageHeight,
<div class="spctrl"></div>　　m_pImageData,&amp;bmi,DIB_RGB_COLORS,SRCCOPY);
<div class="spctrl"></div>　　}<h3 class="headline-2 bk-sidecatalog-title"><a name="3_6"></a><span class="headline-content">6、3D(OpenGL）的不同之处</span></h3>　　如果你是想用刚才我们得到的数据生成纹理对象，那么你还要请出下面的问题。
<div class="spctrl"></div>　　首先，用来生成纹理的数据不需要对齐，也就是说不能在每行的后面加上对齐的字节。当然在OpenGL里要求纹理图片的尺寸为2的幂，所以这个问题实际上不存在；
<div class="spctrl"></div>　　其次，我们得到的图形数据格式是BGR(BGRA），所以在生成纹理的时候，需指定格式为GL_BGR_EXT(GL_BGRA_EXT）；否则需要做BGR-&gt;RGB(BGRA-&gt;RGBA）的转化。<div class="bpctrl" style="clear:both"></div><div class="clear"></div>
</div>
<div class="clear"></div>
<script type="text/javascript">(function(){window.rsInsertData=window.rsInsertData||[];rsInsertData.push([189487,[]]);})();</script>
<div class="reinforce" id="lemmaExtend">
<dl class="nslog-area log-set-param" data-nslog-type="2" id="viewRefer" log-set-param="ext_reference">
<dt>参考资料</dt>
<dd class="reference">
<ul>
<li class="layout">
<span class="ref-index"><span class="r-index">1</span><span class="slide s-right"></span></span>
<div class="ref-bd line-1">
<p>
bmp维基百科资料<a class="ref-top" href="http://baike.baidu.com/view/189487.htm#ref_[1]" id="refIndex_1" name="refIndex_1" title="向上跳转">&nbsp;&nbsp;</a>
</p>
<p class="refUrl"><a href="http://zh.wikipedia.org/wiki/BMP" target="_blank">http://zh.wikipedia.org/wiki/BMP</a></p>
</div>
</li>
</ul>
</dd>
</dl>
<script type="text/javascript"></script><dl class="nslog-area log-set-param" data-nslog-type="1" id="viewExtRead" log-set-param="ext_reader">
<dt>扩展阅读：</dt>
<dd class="reference">
<ul>
<li class="layout">
<span class="ref-index"><span class="r-index">1</span><span class="slide s-right"></span></span>
<p class="ref-bd line-1"><a target="_blank" href="http://post.baidu.com/f?kz=8043855">http://post.baidu.com/f?kz=8043855</a></p>
</li>
<li class="layout">
<span class="ref-index"><span class="r-index">2</span><span class="slide s-right"></span></span>
<p class="ref-bd line-1"><a target="_blank" href="http://www.yuanma.org/data/2006/0610/article_760.htm">http://www.yuanma.org/data/2006/0610/article_760.htm</a></p>
</li>
</ul>
</dd>
</dl>
<dl class="nslog-area log-set-param" data-nslog-type="19" id="viewExtCati" log-set-param="module_tag">
<dt>开放分类：</dt>
<dd>
<a href="http://baike.baidu.com/taglist?tag=%B5%E7%C4%D4&tagfromview" target="_blank">电脑</a></dd>
</dl>
<div class="clear"></div>
<div class="clear"></div>
</div>
<script>baikeViewInfo.cataList=[ {ele:"1", title:"BMP文件格式分析",level:2,display:true},{ele:"2", title:"bmp位图和调色板的概念",level:2,display:true},{ele:"2_1",title:"RGB颜色阵列?",level:3,display:true},{ele:"3", title:"加载文件",level:2,display:true},{ele:"3_1",title:"1、加载文件头",level:3,display:true},{ele:"3_2",title:"2、加载位图信息头",level:3,display:true},{ele:"3_3",title:"3、行对齐",level:3,display:true},{ele:"3_4",title:"4、加载图片数据",level:3,display:true},{ele:"3_5",title:"5、绘制",level:3,display:true},{ele:"3_6",title:"6、3D(OpenGL）的不同之处",level:3,display:true}];if(typeof PDC!="undefined"){PDC.tti();}</script>
</div>
<div class="clear"></div>
</div>
<div class="content-ft">
<div class="reinforce">
<dl class="nslog-area" data-nslog-type="18" id="relatedLemmaDown">
<dt>
“BMP格式”相关词条：
</dt>
<dd class="relative">
<div class="clear"></div>
<div>
<a class="relatedhelp" href="http://www.baidu.com/search/baike_help.html#如何完善相关词条" target="_blank" title="什么是相关词条">什么是相关词条</a>
<a class="myedit nslog:1005" href="http://baike.baidu.com/view/189487.htm#" onclick="userlogin.check(bk.view.editRelated,false,&quot;editrelated&quot;);return false">我来完善</a>
</div>
<div class="clear"></div>
</dd>
</dl>
</div>
<div class="clear"></div>
<div class="clear"></div>
<div class="end">
<p class="declare">百度百科中的词条内容仅供参考，如果您需要解决具体问题（尤其在法律、医学等领域），建议您咨询相关领域专业人士。</p>
<div class="text_vote1" id="vote_btn"><b id="vote_num">417</b><span id="vote_txt">本词条对我有帮助</span></div>
</div><div class="layout share">
<div class="share-item-title">
<a class="cang nslog:99" href="http://cang.baidu.com/do/add" onclick="window.open(&quot;http://cang.baidu.com/do/add?it=&quot;+encodeURIComponent(document.title)+&quot;&amp;iu=&quot;+encodeURIComponent(location.href)+&quot;&amp;tn=%E7%99%BE%E7%A7%91%E8%AF%8D%E6%9D%A1%2C&amp;fr=bk#nw=1&quot;,&quot;_s&quot;,&quot;scrollbars=no,width=600,height=450,left=75,top=20,status=no,resizable= yes&quot;);return false" target="_blank" title="添加到搜藏">添加到搜藏</a>
</div>
<div class="share-item clearfix" id="bdsharebox">
<span class="share-tip">分享到:</span>
<div class="bdshare_t bds_tools get-codes-bdshare" data="{&#39;url&#39;:&#39;http://baike.baidu.com/view/189487.htm&#39;,&#39;text&#39;:&#39;【BMP格式_百度百科】BMP是英文Bitmap（位图）的简写，它是Windows操作系统中的标准图像文件格式，能够被多种Windows应用程序所支持。随着Windows操作系统的流行与丰富的Windows应用程序......&#39;,&#39;pic&#39;:&#39;&#39;,&#39;wbuid&#39;:1647247597}" id="bdshare">
<a class="bds_tsina"></a>
<a class="bds_tqq"></a>
<a class="bds_douban"></a>
<a class="bds_tsohu"></a>
<a class="bds_t163"></a>
<a class="bds_renren"></a>
<span class="bds_more">更多</span>
</div>
<script data="type=tools&amp;uid=71" id="bdshare_js" type="text/javascript"></script>
<script id="bdshell_js" type="text/javascript"></script>
</div>
</div>
<dl class="lemma-ext-bottom nslog-area" data-nslog-type="16">
<dt>合作编辑者</dt>
<dd>
<div class="onelineonly">
<span id="co-editors">
<span>
 <a href="http://baike.baidu.com/cms/s/kdt/index.html" target="_blank"><img align="absmiddle" src="./BMP格式_百度百科_files/tadpole.gif" title="百科蝌蚪团"></a>
<a title="查看此用户资料" class="usercard" username="yangke19941112" target="_blank" href="http://passport.baidu.com/?business&aid=7&default_tab=2&un=yangke19941112#3">yangke19941112</a></span>
<span>
，<a title="查看此用户资料" class="usercard" username="frogzoro" target="_blank" href="http://passport.baidu.com/?business&aid=7&default_tab=2&un=frogzoro#3">frogzoro</a></span>
<span>
，<a title="查看此用户资料" class="usercard" username="selina_sai" target="_blank" href="http://passport.baidu.com/?business&aid=7&default_tab=2&un=selina_sai#3">selina_sai</a></span>
<span>
，<a title="查看此用户资料" class="usercard" username="Miracle_cock" target="_blank" href="http://passport.baidu.com/?business&aid=7&default_tab=2&un=Miracle_cock#3">Miracle_cock</a></span>
<span>
，<a title="查看此用户资料" class="usercard" username="tianhenlanfeng" target="_blank" href="http://passport.baidu.com/?business&aid=7&default_tab=2&un=tianhenlanfeng#3">tianhenlanfeng</a></span>
<span>
，<a title="查看此用户资料" class="usercard" username="河流在奔跑" target="_blank" href="http://passport.baidu.com/?business&aid=7&default_tab=2&un=%BA%D3%C1%F7%D4%DA%B1%BC%C5%DC#3">河流在奔跑</a></span>
 
 
 
 
</span>
</div>
<a class="f12 ref_more" href="http://baike.baidu.com/update/id=189487?from=au" id="more-coeditor" style="" target="_blank">更多</a>
<div class="clear"></div>
<div class="try f12">如果您认为本词条还需进一步完善，百科欢迎您也来参与<a class="try-edit" href="http://baike.baidu.com/view/189487.htm#" onclick="bk.view.editLemma(&quot;/edit/&quot;,&quot;189487&quot;);return false">编辑词条</a>在开始编辑前，您还可以先学习<a href="http://www.baidu.com/search/baike_help.html#编辑原则" target="_blank">如何编辑词条</a></div>
</dd>
</dl>
<p class="bk-feedback">
如想投诉，请到<a class="nslog:1006" href="http://tousu.baidu.com/baike" target="_blank">百度百科投诉中心</a>；如想提出意见、建议，请到<a class="nslog:1007" href="http://tieba.baidu.com/f?kw=%b0%d9%b6%c8%b0%d9%bf%c6" target="_blank">百度百科吧</a>。
</p>
<div class="clear"></div>
</div>
</div>
</div>
<div class="col-sub" id="side">
<div class="userinfo-side">
<div id="userInfoDiv">
</div>
</div>
<div class="box2" id="lemma-overview">
<div class="box2-inner">
<h2>词条统计</h2>
<p class="info f12">
浏览次数：约 <span id="viewPV">157598</span>
次
<br>
编辑次数：18次 <a class="nslog:1021" href="http://baike.baidu.com/update/id=189487" target="_blank">历史版本</a>
<br>
最近更新：<span id="lastModifyTime">2012-01-19</span>
<br>
创建者：<span class="nslog:1022"><a title="查看此用户资料" class="usercard" username="opd自由" target="_blank" href="http://passport.baidu.com/?business&aid=7&default_tab=2&un=opd%D7%D4%D3%C9#3">opd自由</a></span>
</p>
</div>
</div>
<style>.authority-morelink{float:right;text-decoration:underline}</style>
<div class="box2 nslog-area" id="pro-contributors">
<div class="box2-inner">
<h2><span><a href="http://baike.baidu.com/update/id=189487" target="_blank">更多</a></span>贡献光荣榜</h2>
<div class="usercard-info" title=""><img class="what-contri" src="./BMP格式_百度百科_files/blank.gif">鼠标滑过用户名，我们有名片啦！</div>
<div id="contri-div">
<table border="0" cellpadding="0" cellspacing="0" class="topuser f12" width="235px;">
<tbody><tr>
<td class="contri-type" colspan="4"><strong>辛勤贡献者：</strong><img align="absmiddle" class="what" src="./BMP格式_百度百科_files/blank.gif" title="贡献复杂版本，被称为辛勤贡献者"></td>
</tr>
<tr>
<td width="18px">
<a href="http://baike.baidu.com/cms/s/kdt/index.html" target="_blank"><img align="absmiddle" src="./BMP格式_百度百科_files/odp3.png" title="百科蝌蚪团"></a>
</td>
<th width="100px;"><a title="查看此用户资料" class="usercard" username="yangke19941112" target="_blank" href="http://passport.baidu.com/?business&aid=7&default_tab=2&un=yangke19941112#3">yangke19941112</a></th>
<td align="right" width="67px">
<a href="http://www.baidu.com/search/baike_help.html#百科积分体系" target="_blank"><img align="absmiddle" class="usertitle level12" src="./BMP格式_百度百科_files/blank.gif" style="width:67px"></a>
</td>
<td align="right">
<a href="http://www.baidu.com/search/baike_help.html#复杂编辑" target="_blank"><img align="absmiddle" src="./BMP格式_百度百科_files/complexVersionAbs.gif" title="为词条改进贡献了复杂版本的用户，被称为辛勤贡献者"></a>&nbsp;<a class="contri-a nslog:1040" href="http://baike.baidu.com/history/id=26782957" target="_blank">版本</a>
</td>
</tr>
<tr>
<td width="18px">
</td>
<th width="100px;"><a title="查看此用户资料" class="usercard" username="河流在奔跑" target="_blank" href="http://passport.baidu.com/?business&aid=7&default_tab=2&un=%BA%D3%C1%F7%D4%DA%B1%BC%C5%DC#3">河流在奔跑</a></th>
<td align="right" width="67px">
<a href="http://www.baidu.com/search/baike_help.html#百科积分体系" target="_blank"><img align="absmiddle" class="usertitle level3" src="./BMP格式_百度百科_files/blank.gif" style="width:67px"></a>
</td>
<td align="right">
<a href="http://www.baidu.com/search/baike_help.html#复杂编辑" target="_blank"><img align="absmiddle" src="./BMP格式_百度百科_files/complexVersionAbs.gif" title="为词条改进贡献了复杂版本的用户，被称为辛勤贡献者"></a>&nbsp;<a class="contri-a nslog:1040" href="http://baike.baidu.com/history/id=18254617" target="_blank">版本</a>
</td>
</tr>
<tr>
<td width="18px">
</td>
<th width="100px;"><a title="查看此用户资料" class="usercard" username="sdfxzgq" target="_blank" href="http://passport.baidu.com/?business&aid=7&default_tab=2&un=sdfxzgq#3">sdfxzgq</a></th>
<td align="right" width="67px">
<a href="http://www.baidu.com/search/baike_help.html#百科积分体系" target="_blank"><img align="absmiddle" class="usertitle level3" src="./BMP格式_百度百科_files/blank.gif" style="width:67px"></a>
</td>
<td align="right">
<a href="http://www.baidu.com/search/baike_help.html#复杂编辑" target="_blank"><img align="absmiddle" src="./BMP格式_百度百科_files/complexVersionAbs.gif" title="为词条改进贡献了复杂版本的用户，被称为辛勤贡献者"></a>&nbsp;<a class="contri-a nslog:1040" href="http://baike.baidu.com/history/id=11414269" target="_blank">版本</a>
</td>
</tr>
<tr>
<td width="18px">
</td>
<th width="100px;"><a title="查看此用户资料" class="usercard" username="tanaidi91" target="_blank" href="http://passport.baidu.com/?business&aid=7&default_tab=2&un=tanaidi91#3">tanaidi91</a></th>
<td align="right" width="67px">
<a href="http://www.baidu.com/search/baike_help.html#百科积分体系" target="_blank"><img align="absmiddle" class="usertitle level2" src="./BMP格式_百度百科_files/blank.gif" style="width:67px"></a>
</td>
<td align="right">
<a href="http://www.baidu.com/search/baike_help.html#复杂编辑" target="_blank"><img align="absmiddle" src="./BMP格式_百度百科_files/complexVersionAbs.gif" title="为词条改进贡献了复杂版本的用户，被称为辛勤贡献者"></a>&nbsp;<a class="contri-a nslog:1040" href="http://baike.baidu.com/history/id=16860551" target="_blank">版本</a>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="box2" id="bkDynamic" style="">
<div class="box2-inner">
<h5 id="profileTitle">最新动态</h5>
<div class="f12">
<dl class="task nslog-area" data-nslog-type="1023" id="task" style=""><dt><strong>来百科微博闹元宵</strong>：<a href="http://weibo.com/baidubaike" target="_blank"></a></dt> <dd><a href="http://weibo.com/baidubaike" target="_blank"><img src="./BMP格式_百度百科_files/09e49c8b633f47841cd2ca49c8b357dc.jpg" width="160" height="81"></a></dd></dl>
<dl class="notice nslog-area" data-nslog-type="1024" id="notice"><dt><strong>百科消息</strong>：</dt><dd><a href="http://baike.baidu.com/museum/" target="_blank">百度百科数字博物馆上线</a></dd><dd><a href="http://baike.baidu.com/cms/s/baikekehuduan/index.html?name=baikekehuduan&fr=bkhomebaikekehuduan" target="_blank">无限百科全书无线畅读体验</a></dd><dd><a href="http://baike.baidu.com/cms/s/bkguide/index.html" target="_blank">百科新手指南助你做知识达人</a></dd><dd><a href="http://lvyou.baidu.com/event/seizecitycover/index?fr=baike" target="_blank">抢占百度旅游封面赢取时尚大奖</a></dd><dd><a href="http://s.baidu.com/bbs/view/11ecdc37f7523ded8ce5e3df" target="_blank">百度身边拍饭局得话费</a></dd><dd><a href="http://baike.baidu.com/cms/s/usertask/daily/yilanwuyu/index.html" target="_blank">日常任务点亮属于你的百科日历</a></dd><dd><a href="http://jingyan.baidu.com/event/spring/2012/index.html" target="_blank">经验春节大回馈发钱发好礼啦</a></dd><dd><a href="http://zhidao.baidu.com/s/2012spring/index.html?fr=iknow_2012spring_bike1&name=iknow_2012spring" target="_blank">百度知道2012过春节完全手册</a></dd><dd><a href="http://lvyou.baidu.com/event/s/201201happy-new-year/index.html?fr=baike" target="_blank">来旅游微单iPad免费送你啦</a></dd><dd><a href="http://lvyou.baidu.com/event/s/2012newyear/index.html?fr=baike" target="_blank">2012新年去旅行喜享新五福</a></dd><dd><a href="http://s.baidu.com/event/meishi/nianyefan.html" target="_blank">2012最详尽年夜饭预订攻略</a></dd><dd><a href="http://baike.baidu.com/bkcampus/" target="_blank">大学生们快来加入知识先锋</a></dd></dl>
</div>
</div>
</div>
<div class="box2" id="mabox" style="display:none">
<div class="box2-inner" id="box2-inner">
<script type="text/javascript">var arrBaiduAds=new Array();function BaiduAdsDisplay(_){if(typeof(arrBaiduAds[_])=="undefined"||arrBaiduAds[_]==""){return;}G("mabox").style.display="";nslog.set("maad",1);G("box2-inner").innerHTML=arrBaiduAds[_];}</script>
<script type="text/javascript">/*<![CDATA[*/baidu.sio.callByBrowser("http://a.baidu.com/ecom?di=216&tm=baiduASPT216S&tn=baidubaike_pg&word=BMP%B8%F1%CA%BD",function(){BaiduAdsDisplay(216);});/*]]>*/</script>
</div>
</div>
<div class="clear">
</div>
</div>
</div><img src="./BMP格式_百度百科_files/c.gif" style="display:none"><input id="titleVal" type="hidden" value="BMP格式">
</div>
<div class="nslog-area" data-nslog-type="1001" id="footer">
&#169; 2012 Baidu <a href="http://www.baidu.com/search/baike_help.html#百科协议" target="_blank">权利声明</a>
</div>
</div>
<div id="sidecatalog" style="position: fixed; top: 484px; left: 888px; display: none; ">
<div class="sidebar" id="sidebar"></div>
<a class="gotop" href="http://baike.baidu.com/view/189487.htm#" id="gotop" title="返回顶部"></a>
</div>
<div id="side-catalog-content" style="position: fixed; overflow-x: hidden; overflow-y: hidden; height: 290px; top: 284px; left: 915px; display: none; "><div id="side-catalog-up"><div></div></div><div id="side-lemma-title">BMP格式</div><div id="side-title-panel" style="height: 220px; "><div id="side-title-list"><h2><a href="http://baike.baidu.com/view/189487.htm#1" class="nslog:1026" title="BMP文件格式分析">BMP文件格式分析</a></h2><h2><a href="http://baike.baidu.com/view/189487.htm#2" class="nslog:1026" title="bmp位图和调色板的概念">bmp位图和调色板的概念</a></h2><h3><a href="http://baike.baidu.com/view/189487.htm#2_1" class="nslog:1026" title="RGB颜色阵列?">RGB颜色阵列?</a></h3><h2><a href="http://baike.baidu.com/view/189487.htm#3" class="nslog:1026" title="加载文件">加载文件</a></h2><h3><a href="http://baike.baidu.com/view/189487.htm#3_1" class="nslog:1026" title="1、加载文件头">1、加载文件头</a></h3><h3><a href="http://baike.baidu.com/view/189487.htm#3_2" class="nslog:1026" title="2、加载位图信息头">2、加载位图信息头</a></h3><h3><a href="http://baike.baidu.com/view/189487.htm#3_3" class="nslog:1026" title="3、行对齐">3、行对齐</a></h3><h3><a href="http://baike.baidu.com/view/189487.htm#3_4" class="nslog:1026" title="4、加载图片数据">4、加载图片数据</a></h3><h3><a href="http://baike.baidu.com/view/189487.htm#3_5" class="nslog:1026" title="5、绘制">5、绘制</a></h3><h3><a href="http://baike.baidu.com/view/189487.htm#3_6" class="nslog:1026" title="6、3D(OpenGL）的不同之处">6、3D(OpenGL）的不同之处</a></h3></div></div><div id="side-catalog-down"><div></div></div></div>
<script src="./BMP格式_百度百科_files/view_bottom.js" type="text/javascript"></script><script charset="utf-8" src="./BMP格式_百度百科_files/lemma_insert.js" type="text/javascript"></script><script type="text/javascript">/*<![CDATA[*/if((baikeViewInfo.expIndex!=0)&&!(window.location.hash)){window.location.hash="#sub189487";}nslog.set("page","view");nslog.set("lemmaid","189487");nslog.set("ispolysemy","0");baidu.page.loadJsFile("http://baike.bdimg.com/static/lemma/liteoutput/view.js?@=1cp9ei4");baidu.page.loadJsFile("http://baike.bdimg.com/static/usercenter/js/liteoutput/bk.uc_lemma.js?@=184uzx7");baidu.page.loadJsFile("http://img.baidu.com/hunter/baike.js?st="+parseInt(new Date()/86400000));if(typeof PDC!="undefined"){PDC.init({is_login:false,sample:0.01,product_id:103,page_id:1});}/*]]>*/</script><script type="text/javascript">/*<![CDATA[*/(function(){function _(B){var A="baikelog_"+(new Date()).getTime(),_=window[A]=new Image();_.onload=_.onerror=function(){window[A]=null;};_.src="http://nsclick.baidu.com/v.gif?pid=103&type="+B+"&url="+encodeURIComponent(location.href)+"&t="+(new Date()).getTime();_=null;}if(typeof baidu=="undefined"){_(3601);}})();/*]]>*/</script>
 
 
<script>PDC._load_js=function(b,c){var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("src",b);a.onload=a.onreadystatechange=function(){if(!this.readyState||this.readyState=="loaded"||this.readyState=="complete"){a.onload=a.onreadystatechange=null;if(typeof c==="function"){c(b,true)}}};a.onerror=function(d){if(typeof c==="function"){c(b,false)}};document.getElementsByTagName("head")[0].appendChild(a)};PDC._load_analyzer=function(){if(PDC._is_sample()==false){return}PDC._analyzer.loaded=true;PDC._load_js(PDC._analyzer.url,function(){var c=PDC._analyzer.callbacks;for(var b=0,a=c.length;b<a;b++){c[b]()}})};PDC.send=function(){if(PDC._analyzer.loaded==true){WPO_PDA.send()}else{PDC._analyzer.callbacks.push(function(){WPO_PDA.send()})}};PDC._is_sample=function(){var e=false,d=this._opt.sample,b=0;if(window.performance&&window.performance.timing){d=d*5}var c=new Date().getHours();if(c>1&&c<8){d=d*5}d=d>0.9?0.9:d;d=d<0.0001?0.0001:d;var a=document.cookie.match(/BAIDUID=(\w*):/);if(a){b=parseInt(a[1].slice(-4),16);b=isNaN(b)?0:b}if(d<=0.5){e=(b%(parseInt(1/d))==1)}else{e=(b%(parseInt(1/(1-d)))!=1)}return e};(function(){if(document.attachEvent){window.attachEvent("onload",function(){PDC.mark("lt")},false)}else{window.addEventListener("load",function(){PDC.mark("let");PDC._load_analyzer()})}})();</script>
<div id="usercard-wrap"><div class="user-card fix" style="opacity: 0; "><div class="top-bg"></div><div class="card-body fix"><div class="uc-l"><div class="uc-pic"></div><div class="uc-name"><a class="uc-id" href=""></a></div><div class="uc-level"></div></div><div class="uc-r"><div class="uc-items"><div class="uc-role fix"></div><div class="uc-badge fix"></div><div class="uc-honor"></div><div class="uc-going-task fix"></div><div class="uc-gq"></div><div class="uc-default"></div><div class="uc-edit"></div></div><span class="pillar"></span></div></div></div></div></body></html>
